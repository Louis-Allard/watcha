{"ast":null,"code":"import _objectSpread from \"/home/louis/Desktop/Projet2/lille-0219-js-projet2-moviedb/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/louis/Desktop/Projet2/lille-0219-js-projet2-moviedb/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/louis/Desktop/Projet2/lille-0219-js-projet2-moviedb/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/louis/Desktop/Projet2/lille-0219-js-projet2-moviedb/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/louis/Desktop/Projet2/lille-0219-js-projet2-moviedb/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/louis/Desktop/Projet2/lille-0219-js-projet2-moviedb/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/louis/Desktop/Projet2/lille-0219-js-projet2-moviedb/src/components/Fiche.jsx\";\nimport React from \"react\";\nimport axios from 'axios';\nimport Youtube from \"react-youtube\";\nimport CastingActors from \"./CastingActors\";\nimport CastTech from \"./CastTech\";\nimport CastMusic from \"./CastMusic\";\nimport CastDirector from \"./CastDirector\";\nimport favlogo from './img/fav.png';\nimport nonfavlogo from './img/nonfav.png';\nimport '../Fiche.css';\nimport Footer from \"./Footer\";\nimport { NavLink } from 'react-router-dom';\nimport swal from 'sweetalert';\nimport Rating from \"react-rating\";\n\nvar Fiche =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Fiche, _React$Component);\n\n  function Fiche(props) {\n    var _this;\n\n    _classCallCheck(this, Fiche);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Fiche).call(this, props));\n\n    _this.addFav = function () {\n      axios.get(\"http://localhost:5050/favorites?movie_id=\".concat(_this.props.match.params.ficheNumber, \"&user=2\")).then(function (res) {\n        if (res.data.length === 0) {\n          var favorites = {\n            user_id: \"2\",\n            movie_id: _this.props.match.params.ficheNumber\n          };\n          axios.post('http://localhost:5050/favorites', _objectSpread({}, favorites)).then(function (res) {});\n          swal(\"Added\", \"You added this movie to favorite !\", \"success\");\n\n          _this.setState({\n            favoriteLogo: favlogo,\n            favoriteLogoTitle: \"Remove from Favorites\"\n          });\n        } else {\n          axios.get(\"http://localhost:5050/favorites?movie_id=\".concat(_this.props.match.params.ficheNumber, \"&user=2\")).then(function (res) {\n            var idToDelete = res.data[0].id;\n            axios.delete(\"http://localhost:5050/favorites/\".concat(idToDelete)).then(function (res) {});\n          });\n          swal(\"Removed\", \"This movie rate has been removed\", \"error\");\n\n          _this.setState({\n            favoriteLogo: nonfavlogo,\n            favoriteLogoTitle: \"Add to Favorites\"\n          });\n        }\n\n        ;\n      });\n    };\n\n    _this.addRate = function (value) {\n      axios.get(\"http://localhost:5050/rating?movie_id=\".concat(_this.props.match.params.ficheNumber, \"&user=2\")).then(function (res) {\n        if (res.data.length === 0) {\n          var rating = {\n            user_id: \"2\",\n            movie_id: _this.props.match.params.ficheNumber,\n            rate: value\n          };\n          axios.post('http://localhost:5050/rating', _objectSpread({}, rating)).then(function (res) {});\n          swal(\"Rated\", \"This movie has been rated !\", \"success\");\n        } else {\n          axios.get(\"http://localhost:5050/rating?movie_id=\".concat(_this.props.match.params.ficheNumber, \"&user=2\")).then(function (res) {\n            var idToDelete = res.data[0].id;\n            axios.delete(\"http://localhost:5050/rating/\".concat(idToDelete)).then(function (res) {});\n          });\n          var _rating = {\n            user_id: \"2\",\n            movie_id: _this.props.match.params.ficheNumber,\n            rate: value\n          };\n          axios.post('http://localhost:5050/rating', _objectSpread({}, _rating)).then(function (res) {});\n          swal(\"Rated\", \"This movie has been rated !\", \"success\");\n        }\n\n        ;\n      });\n    };\n\n    _this.state = {\n      fiche: [],\n      genres: [],\n      videoId: \"\",\n      rateToSet: 0,\n      favoriteLogo: \"\",\n      favoriteLogoTitle: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(Fiche, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getFiche();\n      this.setDefaultRate();\n    }\n  }, {\n    key: \"getFiche\",\n    value: function getFiche() {\n      var _this2 = this;\n\n      axios.get(\"https://api.themoviedb.org/3/movie/\".concat(this.props.match.params.ficheNumber, \"?api_key=a8a3380a564299f359c18e52aaa5bc79\")).then(function (response) {\n        _this2.setState({\n          fiche: response.data,\n          genres: response.data.genres\n        });\n\n        var query = \"\".concat(response.data.original_title, \" trailer\");\n        axios.create({\n          baseURL: \"https://content.googleapis.com/youtube/v3\",\n          timeout: 1000\n        }).get(\"/search?q=\".concat(query, \"&part=snippet&maxResults=1&type=video&key=AIzaSyAYQjF7_hRZGUMoUwlcUezlq33cGFz5SO0\")).then(function (response) {\n          var vidId = response.data.items[0].id.videoId;\n\n          _this2.setState({\n            videoId: vidId\n          });\n        }).catch(function (error) {\n          console.log(\"Echec appel API Youtube: \" + error);\n        });\n      });\n      axios.get(\"http://localhost:5050/favorites?movie_id=\".concat(this.props.match.params.ficheNumber, \"&user=2\")).then(function (res) {\n        if (res.data.length === 0) {\n          _this2.setState({\n            favoriteLogo: nonfavlogo,\n            favoriteLogoTitle: \"Add to Favorites\"\n          });\n        } else {\n          _this2.setState({\n            favoriteLogo: favlogo,\n            favoriteLogoTitle: \"Remove from Favorites\"\n          });\n        }\n\n        ;\n      });\n    }\n  }, {\n    key: \"setDefaultRate\",\n    value: function setDefaultRate() {\n      var _this3 = this;\n\n      axios.get(\"http://localhost:5050/rating?movie_id=\".concat(this.props.match.params.ficheNumber, \"&user=2\")).then(function (res) {\n        if (res.data.length !== 0) {\n          _this3.setState({\n            rateToSet: res.data[0].rate\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(\"div\", {\n        className: \"container-fluid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"movie-description justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"movie-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, this.state.fiche.original_title), React.createElement(\"div\", {\n        className: \"movie-pic row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"movie-fav col-lg-4 col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"movie-poster\",\n        src: \"https://image.tmdb.org/t/p/w500\" + this.state.fiche.poster_path,\n        alt: this.state.fiche.original_title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"youtube col-lg-6 col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(Youtube, {\n        className: \"heigh-youtube\",\n        videoId: this.state.videoId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        className: \"movie-date\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \"Release date : \", this.state.fiche.release_date), React.createElement(\"div\", {\n        className: \"movie-synopsis mb-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"synopsis-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \"Synopsis\"), React.createElement(\"p\", {\n        className: \"synopsis-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, this.state.fiche.overview), React.createElement(\"div\", {\n        className: \"Rating\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"Rate this movie : \", React.createElement(Rating, {\n        stop: 10,\n        onClick: function onClick(value) {\n          return _this4.addRate(value);\n        },\n        placeholderRating: this.state.rateToSet,\n        placeholderSymbol: React.createElement(\"img\", {\n          src: \"https://cdn3.iconfinder.com/data/icons/shapes-have-feelings-too-v2/640/star-face-emoji-shapes-happy-emoticons-smiley-2-512.png\",\n          className: \"Rate-icon\",\n          alt: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }),\n        emptySymbol: React.createElement(\"img\", {\n          src: \"https://cdn3.iconfinder.com/data/icons/pretty-office-part-3/256/Star_empty-512.png\",\n          className: \"Rate-icon\",\n          alt: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }),\n        fullSymbol: React.createElement(\"img\", {\n          src: \"https://cdn3.iconfinder.com/data/icons/shapes-have-feelings-too-v2/640/star-face-emoji-shapes-happy-emoticons-smiley-2-512.png\",\n          className: \"Rate-icon\",\n          alt: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"faviconblock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"addfav\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"Add to favorites :\"), React.createElement(\"img\", {\n        src: this.state.favoriteLogo,\n        className: \"favicon\",\n        onClick: this.addFav,\n        alt: \"fav\",\n        title: this.state.favoriteLogoTitle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }))))), React.createElement(\"div\", {\n        className: \"movie-infos container \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"movie-genre\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, \"Genres \"), this.state.genres === undefined ? ' ' : this.state.genres.map(function (genre) {\n        return React.createElement(NavLink, {\n          activeClassName: \"active\",\n          className: \"textdeco\",\n          style: {\n            textDecoration: 'none',\n            outline: 'none'\n          },\n          exact: true,\n          to: \"/gallery/\".concat(genre.name, \"/\").concat(genre.id),\n          key: genre.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        }, genre.name, \" \");\n      }))), React.createElement(\"div\", {\n        className: \"movie-casting\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ml-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, \"Casting\")), React.createElement(\"div\", {\n        className: \"ul-actors-pics mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, console.log(''), React.createElement(CastingActors, {\n        idFilm: this.props.match.params.ficheNumber,\n        key: this.state.fiche.original_title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"movie-director\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"infos-casting\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, \"Director\"), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(CastDirector, {\n        idFilm: this.props.match.params.ficheNumber,\n        key: this.state.fiche.original_title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"movie-casttech\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, \"Production\"), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(CastTech, {\n        idFilm: this.props.match.params.ficheNumber,\n        key: this.state.fiche.original_title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"movie-music\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"Music\"), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(CastMusic, {\n        idFilm: this.props.match.params.ficheNumber,\n        key: this.state.fiche.original_title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"img-down\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"https://image.tmdb.org/t/p/w500\" + this.state.fiche.backdrop_path,\n        alt: this.state.fiche.original_title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(Footer, {\n        className: \"footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }))))));\n    }\n  }]);\n\n  return Fiche;\n}(React.Component);\n\nexport default Fiche;","map":{"version":3,"sources":["/home/louis/Desktop/Projet2/lille-0219-js-projet2-moviedb/src/components/Fiche.jsx"],"names":["React","axios","Youtube","CastingActors","CastTech","CastMusic","CastDirector","favlogo","nonfavlogo","Footer","NavLink","swal","Rating","Fiche","props","addFav","get","match","params","ficheNumber","then","res","data","length","favorites","user_id","movie_id","post","setState","favoriteLogo","favoriteLogoTitle","idToDelete","id","delete","addRate","value","rating","rate","state","fiche","genres","videoId","rateToSet","getFiche","setDefaultRate","response","query","original_title","create","baseURL","timeout","vidId","items","catch","error","console","log","poster_path","release_date","overview","undefined","map","genre","textDecoration","outline","name","backdrop_path","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from 'axios';\nimport Youtube from \"react-youtube\";\nimport CastingActors from \"./CastingActors\";\nimport CastTech from \"./CastTech\";\nimport CastMusic from \"./CastMusic\";\nimport CastDirector from \"./CastDirector\";\nimport favlogo from './img/fav.png';\nimport nonfavlogo from './img/nonfav.png';\nimport '../Fiche.css';\nimport Footer from \"./Footer\";\nimport { NavLink } from 'react-router-dom';\nimport swal from 'sweetalert';\nimport Rating from \"react-rating\";\n\nclass Fiche extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fiche: [],\n      genres: [],\n      videoId: \"\",\n      rateToSet: 0,\n      favoriteLogo: \"\",\n      favoriteLogoTitle: \"\"\n    };\n  }\n  componentDidMount() {\n    this.getFiche()\n    this.setDefaultRate()\n  };\n  getFiche() {\n    axios.get(`https://api.themoviedb.org/3/movie/${this.props.match.params.ficheNumber}?api_key=a8a3380a564299f359c18e52aaa5bc79`)\n      .then(response => {\n        this.setState({\n          fiche: response.data,\n          genres: response.data.genres\n        });\n        const query = `${response.data.original_title} trailer`;\n        axios\n          .create({\n            baseURL: \"https://content.googleapis.com/youtube/v3\",\n            timeout: 1000\n          })\n          .get(\n            `/search?q=${query}&part=snippet&maxResults=1&type=video&key=AIzaSyAYQjF7_hRZGUMoUwlcUezlq33cGFz5SO0`\n          )\n          .then(response => {\n            const vidId = response.data.items[0].id.videoId;\n            this.setState({ videoId: vidId });\n          })\n          .catch(function (error) {\n            console.log(\"Echec appel API Youtube: \" + error);\n          });\n      });\n    axios.get(`http://localhost:5050/favorites?movie_id=${this.props.match.params.ficheNumber}&user=2`)\n      .then(res => {\n        if (res.data.length === 0) {\n          this.setState({\n            favoriteLogo: nonfavlogo,\n            favoriteLogoTitle: \"Add to Favorites\"\n          })\n        } else {\n          this.setState({\n            favoriteLogo: favlogo,\n            favoriteLogoTitle: \"Remove from Favorites\"\n          });\n        };\n      });\n\n  }\n  addFav = () => {\n    axios.get(`http://localhost:5050/favorites?movie_id=${this.props.match.params.ficheNumber}&user=2`)\n      .then(res => {\n        if (res.data.length === 0) {\n          let favorites = {\n            user_id: \"2\",\n            movie_id: this.props.match.params.ficheNumber\n          };\n          axios.post('http://localhost:5050/favorites', { ...favorites })\n            .then(res => {\n            });\n          swal(\"Added\", \"You added this movie to favorite !\", \"success\");\n          this.setState({\n            favoriteLogo: favlogo,\n            favoriteLogoTitle: \"Remove from Favorites\"\n          });\n        }\n        else {\n          axios.get(`http://localhost:5050/favorites?movie_id=${this.props.match.params.ficheNumber}&user=2`)\n            .then(res => {\n              let idToDelete = res.data[0].id\n              axios.delete(`http://localhost:5050/favorites/${idToDelete}`)\n                .then(res => {\n                });\n            });\n          swal(\"Removed\", \"This movie rate has been removed\", \"error\");\n          this.setState({\n            favoriteLogo: nonfavlogo,\n            favoriteLogoTitle: \"Add to Favorites\"\n          });\n        };\n      });\n  };\n  setDefaultRate() {\n    axios.get(`http://localhost:5050/rating?movie_id=${this.props.match.params.ficheNumber}&user=2`)\n      .then(res => {\n        if (res.data.length !== 0) {\n          this.setState({ rateToSet: res.data[0].rate })\n        }\n      })\n  };\n  addRate = (value) => {\n    axios.get(`http://localhost:5050/rating?movie_id=${this.props.match.params.ficheNumber}&user=2`)\n      .then(res => {\n        if (res.data.length === 0) {\n          let rating = {\n            user_id: \"2\",\n            movie_id: this.props.match.params.ficheNumber,\n            rate: value\n          };\n          axios.post('http://localhost:5050/rating', { ...rating })\n            .then(res => {\n            });\n          swal(\"Rated\", \"This movie has been rated !\", \"success\");\n        }\n        else {\n          axios.get(`http://localhost:5050/rating?movie_id=${this.props.match.params.ficheNumber}&user=2`)\n            .then(res => {\n              let idToDelete = res.data[0].id\n              axios.delete(`http://localhost:5050/rating/${idToDelete}`)\n                .then(res => {\n                });\n            });\n          let rating = {\n            user_id: \"2\",\n            movie_id: this.props.match.params.ficheNumber,\n            rate: value\n          };\n          axios.post('http://localhost:5050/rating', { ...rating })\n            .then(res => {\n            });\n          swal(\"Rated\", \"This movie has been rated !\", \"success\");\n        };\n      });\n  };\n  render() {\n    return (\n      <div className=\"container-fluid\">\n        <div className=\"movie-description justify-content-center\">\n          <h1 className=\"movie-title\">{this.state.fiche.original_title}</h1>\n          <div className=\"movie-pic row\">\n            <div className=\"movie-fav col-lg-4 col-md-12\">\n              <img className=\"movie-poster\" src={\"https://image.tmdb.org/t/p/w500\" + this.state.fiche.poster_path} alt={this.state.fiche.original_title} />\n\n            </div>\n            <div className=\"youtube col-lg-6 col-md-12\"><Youtube className=\"heigh-youtube\" videoId={this.state.videoId} />\n              <p className=\"movie-date\">Release date : {this.state.fiche.release_date}</p>\n              <div className=\"movie-synopsis mb-5\">\n                <h2 className=\"synopsis-title\">Synopsis</h2>\n                <p className=\"synopsis-title\">{this.state.fiche.overview}</p>\n                <div className=\"Rating\">\n                  Rate this movie : <Rating stop={10} onClick={(value) => this.addRate(value)}\n                    placeholderRating={this.state.rateToSet}\n                    placeholderSymbol={<img src=\"https://cdn3.iconfinder.com/data/icons/shapes-have-feelings-too-v2/640/star-face-emoji-shapes-happy-emoticons-smiley-2-512.png\" className=\"Rate-icon\" alt=\"\" />}\n                    emptySymbol={<img src=\"https://cdn3.iconfinder.com/data/icons/pretty-office-part-3/256/Star_empty-512.png\" className=\"Rate-icon\" alt=\"\" />}\n                    fullSymbol={<img src=\"https://cdn3.iconfinder.com/data/icons/shapes-have-feelings-too-v2/640/star-face-emoji-shapes-happy-emoticons-smiley-2-512.png\" className=\"Rate-icon\" alt=\"\" />}\n                  />\n                </div>\n                <div className=\"faviconblock\">\n                <p className=\"addfav\">Add to favorites :</p>\n                <img src={this.state.favoriteLogo} className=\"favicon\" onClick={this.addFav} alt=\"fav\" title={this.state.favoriteLogoTitle} />\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"movie-infos container \">\n            <div className=\"movie-genre\">\n              <ul>\n                <h4>Genres </h4>{this.state.genres === undefined ? ' ' : this.state.genres.map((genre) => {\n                  return <NavLink activeClassName=\"active\" className=\"textdeco\" style={{ textDecoration: 'none', outline: 'none' }} exact to={`/gallery/${genre.name}/${genre.id}`} key={genre.name}>{genre.name} </NavLink>\n                }\n                )\n                }\n              </ul>\n            </div>\n            <div className=\"movie-casting\">\n              <div className=\"ml-5\">\n                <h4 className=\"\">Casting</h4></div>\n              <div className=\"ul-actors-pics mt-3\">\n              {console.log('')}\n                <CastingActors idFilm={this.props.match.params.ficheNumber} key={this.state.fiche.original_title}/>\n              </div>\n            </div>\n            <div className=\"movie-director\">\n              <div className=\"infos-casting\">\n                <h4>Director</h4>\n                <ul>\n                  <CastDirector idFilm={this.props.match.params.ficheNumber} key={this.state.fiche.original_title} />\n                </ul>\n              </div>\n              <div className=\"movie-casttech\">\n                <h4>Production</h4>\n                <ul>\n                  <CastTech idFilm={this.props.match.params.ficheNumber} key={this.state.fiche.original_title} />\n                </ul>\n              </div>\n              <div className=\"movie-music\">\n                <h4>Music</h4>\n                <ul>\n                  <CastMusic idFilm={this.props.match.params.ficheNumber} key={this.state.fiche.original_title}/>\n                </ul>\n              </div>\n            </div>\n            <div className=\"img-down\">\n              <img src={\"https://image.tmdb.org/t/p/w500\" + this.state.fiche.backdrop_path} alt={this.state.fiche.original_title} />\n              <p><Footer className=\"footer\" /></p>\n            </div>\n          </div>  \n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Fiche;"]},"metadata":{},"sourceType":"module"}